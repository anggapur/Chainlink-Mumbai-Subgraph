specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  # DAI to USD
  - kind: ethereum/contract
    name: AccessControlledOffchainAggregatorDAItoUSD
    network: matic
    source:
      startBlock: 16610793
      address: "0x62439095489Eb5dE4572de632248682c09a05Ad4"
      abi: AccessControlledOffchainAggregator
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:       
        # For Initial Creation of Feed Entity   
        - RequesterAccessControllerSet
        - NewRound
        - AnswerUpdated
      abis:
        - name: AccessControlledOffchainAggregator
          file: ./abis/AccessControlledOffchainAggregator.json
      eventHandlers:       
        # For Initial Creation of Feed Entity                
        - event: RequesterAccessControllerSet(address,address)
          handler: handleRequesterAccessControllerSet
        - event: NewRound(indexed uint256,indexed address,uint256)
          handler: handlerNewRound
        - event: AnswerUpdated(indexed int256,indexed uint256,uint256)
          handler: handleAnswerUpdated
      file: ./src/handler.ts
  # USDC to USD
  - kind: ethereum/contract
    name: AccessControlledOffchainAggregatorUSDCtoUSD
    network: matic
    source:
      startBlock: 16611001
      address: "0xf9c53A834F60cBbE40E27702276fBc0819B3aFAD"
      abi: AccessControlledOffchainAggregator
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:       
        # For Initial Creation of Feed Entity   
        - RequesterAccessControllerSet
        - NewRound
        - AnswerUpdated
      abis:
        - name: AccessControlledOffchainAggregator
          file: ./abis/AccessControlledOffchainAggregator.json
      eventHandlers:       
        # For Initial Creation of Feed Entity                
        - event: RequesterAccessControllerSet(address,address)
          handler: handleRequesterAccessControllerSet
        - event: NewRound(indexed uint256,indexed address,uint256)
          handler: handlerNewRound
        - event: AnswerUpdated(indexed int256,indexed uint256,uint256)
          handler: handleAnswerUpdated
      file: ./src/handler.ts
  # USDT to USD
  - kind: ethereum/contract
    name: AccessControlledOffchainAggregatorUSDTtoUSD
    network: matic
    source:
      startBlock: 16610301
      address: "0x3011E9D73E9b01A593dA032F41626E6bbE9e408D"
      abi: AccessControlledOffchainAggregator
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:       
        # For Initial Creation of Feed Entity   
        - RequesterAccessControllerSet
        - NewRound
        - AnswerUpdated
      abis:
        - name: AccessControlledOffchainAggregator
          file: ./abis/AccessControlledOffchainAggregator.json
      eventHandlers:       
        # For Initial Creation of Feed Entity                
        - event: RequesterAccessControllerSet(address,address)
          handler: handleRequesterAccessControllerSet
        - event: NewRound(indexed uint256,indexed address,uint256)
          handler: handlerNewRound
        - event: AnswerUpdated(indexed int256,indexed uint256,uint256)
          handler: handleAnswerUpdated
      file: ./src/handler.ts